<div class="article-container">
    <div class="article-header">
        <button class="back-button" (click)="goBack()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m15 18-6-6 6-6" />
            </svg>
        </button>
        <h1 class="article-title">{{ article?.title || 'Titre de l\'article sélectionné' }}</h1>
    </div>

    <div class="article-content" *ngIf="article">
        <div class="article-meta">
            <div class="meta-item">
                <span class="meta-label">Date</span>
                <span class="meta-value">{{ article.createdAt | date:'dd/MM/yyyy' }}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Auteur</span>
                <span class="meta-value">{{ article.user.username }}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Thème</span>
                <span class="meta-value">{{ topicTitle }}</span>
            </div>
        </div>

        <div class="article-body">
            <p>{{ article.content }}</p>
        </div>

        <div class="comments-section">
            <h2 class="comments-title">Commentaires</h2>

            <div class="comments-list" *ngIf="comments.length > 0">
                <div class="comment-item" *ngFor="let comment of comments">
                    <div class="comment-header">
                        <span class="comment-username">{{ comment.username }}</span>
                    </div>
                    <div class="comment-content">
                        {{ comment.content }}
                    </div>
                </div>
            </div>

            <div class="comment-form">
                <div class="form-group">
                    <textarea [(ngModel)]="newComment" placeholder="Écrivez ici votre commentaire" class="comment-input"
                        rows="3">
          </textarea>
                    <button class="submit-button" (click)="addComment()" [disabled]="!newComment.trim()">
                        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="m22 2-7 20-4-9-9-4 20-7z" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-container" *ngIf="!article">
        <div class="loading-spinner"></div>
        <p>Chargement de l'article...</p>
    </div>
</div>